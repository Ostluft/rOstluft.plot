<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Summarise z values over binned wind data. — geom_bar_wind • rOstluft.plot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Summarise z values over binned wind data. — geom_bar_wind"><meta name="description" content="All calculation are done by summary_wind(), see the documentation for the details.
stat_summary_wind() uses the aesthetics ws, wd and z to map the correspondent arguments
for summary_wind(). The computed variables are named ws, wd and z. geom_bar_wind()
is an extension to ggplot2::geom_bar() with stat_summary_wind() as default stat and correct
handling of the factorized x aesthetic. To map the computed Variables use ggplot2::stat()."><meta property="og:description" content="All calculation are done by summary_wind(), see the documentation for the details.
stat_summary_wind() uses the aesthetics ws, wd and z to map the correspondent arguments
for summary_wind(). The computed variables are named ws, wd and z. geom_bar_wind()
is an extension to ggplot2::geom_bar() with stat_summary_wind() as default stat and correct
handling of the factorized x aesthetic. To map the computed Variables use ggplot2::stat()."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rOstluft.plot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Kalender_Linie.html">Linien Kalender</a></li>
    <li><a class="dropdown-item" href="../articles/Wind_Density.html">Diurnal Wind als Density und Boxplot</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/Ostluft/rOstluft.plot"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Summarise z values over binned wind data.</h1>
      <small class="dont-index">Source: <a href="https://github.com/Ostluft/rOstluft.plot/blob/HEAD/R/geom_bar_wind.R" class="external-link"><code>R/geom_bar_wind.R</code></a>, <a href="https://github.com/Ostluft/rOstluft.plot/blob/HEAD/R/stat_summary_wind.R" class="external-link"><code>R/stat_summary_wind.R</code></a></small>
      <div class="d-none name"><code>geom_bar_wind.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>All calculation are done by <code><a href="summary_wind.html">summary_wind()</a></code>, see the documentation for the details.
<code>stat_summary_wind()</code> uses the aesthetics <code>ws</code>, <code>wd</code> and <code>z</code> to map the correspondent arguments
for <code><a href="summary_wind.html">summary_wind()</a></code>. The computed variables are named <code>ws</code>, <code>wd</code> and <code>z</code>. <code>geom_bar_wind()</code>
is an extension to <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">ggplot2::geom_bar()</a></code> with <code>stat_summary_wind()</code> as default stat and correct
handling of the factorized <code>x</code> aesthetic. To map the computed Variables use <code><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">ggplot2::stat()</a></code>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">geom_bar_wind</span><span class="op">(</span></span>
<span>  mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  stat <span class="op">=</span> <span class="st">"summary_wind"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  fun <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  fun.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  nmin <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  wd_cutfun <span class="op">=</span> <span class="fu"><a href="cut_wd.fun.html">cut_wd.fun</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">45</span><span class="op">)</span>,</span>
<span>  ws_cutfun <span class="op">=</span> <span class="fu"><a href="cut_ws.fun.html">cut_ws.fun</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show.legend <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  inherit.aes <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">stat_summary_wind</span><span class="op">(</span></span>
<span>  data <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mapping <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  geom <span class="op">=</span> <span class="st">"bar_wind"</span>,</span>
<span>  position <span class="op">=</span> <span class="st">"stack"</span>,</span>
<span>  <span class="va">...</span>,</span>
<span>  groupings <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  fun <span class="op">=</span> <span class="st">"mean"</span>,</span>
<span>  fun.args <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  nmin <span class="op">=</span> <span class="fl">3</span>,</span>
<span>  wd_cutfun <span class="op">=</span> <span class="fu"><a href="cut_wd.fun.html">cut_wd.fun</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">45</span><span class="op">)</span>,</span>
<span>  ws_cutfun <span class="op">=</span> <span class="fu"><a href="cut_ws.fun.html">cut_ws.fun</a></span><span class="op">(</span>binwidth <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  na.rm <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  show.legend <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  inherit.aes <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-mapping">mapping<a class="anchor" aria-label="anchor" href="#arg-mapping"></a></dt>
<dd><p>Set of aesthetic mappings created by <code><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes()</a></code>. If specified and
<code>inherit.aes = TRUE</code> (the default), it is combined with the default mapping
at the top level of the plot. You must supply <code>mapping</code> if there is no plot
mapping.</p></dd>


<dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>a data.frame or tibble containing the data (wide format)</p></dd>


<dt id="arg-stat">stat<a class="anchor" aria-label="anchor" href="#arg-stat"></a></dt>
<dd><p>The statistical transformation to use on the data for this layer.
When using a <code>geom_*()</code> function to construct a layer, the <code>stat</code>
argument can be used the override the default coupling between geoms and
stats. The <code>stat</code> argument accepts the following:</p><ul><li><p>A <code>Stat</code> ggproto subclass, for example <code>StatCount</code>.</p></li>
<li><p>A string naming the stat. To give the stat as a string, strip the
function name of the <code>stat_</code> prefix. For example, to use <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">stat_count()</a></code>,
give the stat as <code>"count"</code>.</p></li>
<li><p>For more information and other ways to specify the stat, see the
<a href="https://ggplot2.tidyverse.org/reference/layer_stats.html" class="external-link">layer stat</a> documentation.</p></li>
</ul></dd>


<dt id="arg-position">position<a class="anchor" aria-label="anchor" href="#arg-position"></a></dt>
<dd><p>A position adjustment to use on the data for this layer. This
can be used in various ways, including to prevent overplotting and
improving the display. The <code>position</code> argument accepts the following:</p><ul><li><p>The result of calling a position function, such as <code><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html" class="external-link">position_jitter()</a></code>.
This method allows for passing extra arguments to the position.</p></li>
<li><p>A string naming the position adjustment. To give the position as a
string, strip the function name of the <code>position_</code> prefix. For example,
to use <code><a href="https://ggplot2.tidyverse.org/reference/position_jitter.html" class="external-link">position_jitter()</a></code>, give the position as <code>"jitter"</code>.</p></li>
<li><p>For more information and other ways to specify the position, see the
<a href="https://ggplot2.tidyverse.org/reference/layer_positions.html" class="external-link">layer position</a> documentation.</p></li>
</ul></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments passed on to <code><a href="https://ggplot2.tidyverse.org/reference/layer.html" class="external-link">layer()</a></code>. These are
often aesthetics, used to set an aesthetic to a fixed value, like
<code>colour = "red"</code> or <code>size = 3</code>. They may also be parameters
to the paired geom/stat.</p></dd>


<dt id="arg-fun">fun<a class="anchor" aria-label="anchor" href="#arg-fun"></a></dt>
<dd><p>function or list of functions for summary.</p></dd>


<dt id="arg-fun-args">fun.args<a class="anchor" aria-label="anchor" href="#arg-fun-args"></a></dt>
<dd><p>a list of extra arguments passed on to fun.</p></dd>


<dt id="arg-nmin">nmin<a class="anchor" aria-label="anchor" href="#arg-nmin"></a></dt>
<dd><p>numeric, minimum number of values for fun, if n &lt; nmin: NA is returned</p></dd>


<dt id="arg-wd-cutfun">wd_cutfun<a class="anchor" aria-label="anchor" href="#arg-wd-cutfun"></a></dt>
<dd><p>function, cut function for wind direction (to create bins). See <code><a href="cut_wd.fun.html">cut_wd.fun()</a></code> for options.</p></dd>


<dt id="arg-ws-cutfun">ws_cutfun<a class="anchor" aria-label="anchor" href="#arg-ws-cutfun"></a></dt>
<dd><p>function, cut function for wind speed. See <code><a href="cut_ws.fun.html">cut_ws.fun()</a></code> for examples</p></dd>


<dt id="arg-na-rm">na.rm<a class="anchor" aria-label="anchor" href="#arg-na-rm"></a></dt>
<dd><p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p></dd>


<dt id="arg-show-legend">show.legend<a class="anchor" aria-label="anchor" href="#arg-show-legend"></a></dt>
<dd><p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p></dd>


<dt id="arg-inherit-aes">inherit.aes<a class="anchor" aria-label="anchor" href="#arg-inherit-aes"></a></dt>
<dd><p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href="https://ggplot2.tidyverse.org/reference/borders.html" class="external-link">borders()</a></code>.</p></dd>


<dt id="arg-geom">geom<a class="anchor" aria-label="anchor" href="#arg-geom"></a></dt>
<dd><p>The geometric object to use to display the data for this layer.
When using a <code>stat_*()</code> function to construct a layer, the <code>geom</code> argument
can be used to override the default coupling between stats and geoms. The
<code>geom</code> argument accepts the following:</p><ul><li><p>A <code>Geom</code> ggproto subclass, for example <code>GeomPoint</code>.</p></li>
<li><p>A string naming the geom. To give the geom as a string, strip the
function name of the <code>geom_</code> prefix. For example, to use <code><a href="https://ggplot2.tidyverse.org/reference/geom_point.html" class="external-link">geom_point()</a></code>,
give the geom as <code>"point"</code>.</p></li>
<li><p>For more information and other ways to specify the geom, see the
<a href="https://ggplot2.tidyverse.org/reference/layer_geoms.html" class="external-link">layer geom</a> documentation.</p></li>
</ul></dd>


<dt id="arg-groupings">groupings<a class="anchor" aria-label="anchor" href="#arg-groupings"></a></dt>
<dd><p>additional groupings. Use helper <code><a href="grp.html">grp()</a></code> to create</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code><a href="https://ggplot2.tidyverse.org/reference/layer.html" class="external-link">ggplot2::layer()</a></code></p>
    </div>
    <div class="section level2">
    <h2 id="recommendation">Recommendation<a class="anchor" aria-label="anchor" href="#recommendation"></a></h2>



<p>The facetting functions takes the inputs and evaluate them in the context of the dataset.
This means it is impossible to use a computed variable from a stat or from an asthetic.
This limitation means <code><a href="summary_wind.html">summary_wind()</a></code> isn't a good fit with ggplot as a stat.</p>
<p>In most cases it is simpler to summarize the data beforehand and then create a plot
from the summarized data.</p>
<p><code><a href="ggwindrose.html">ggwindrose()</a></code> and <code><a href="ggradar.html">ggradar()</a></code> can be used to create some standardized plots.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu">rOstluft.data</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft.data/man/f.html" class="external-link">f</a></span><span class="op">(</span><span class="st">"Zch_Stampfenbachstrasse_2010-2014.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/read_airmo_csv.html" class="external-link">read_airmo_csv</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/rolf_to_openair.html" class="external-link">rolf_to_openair</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># a simple wind rose</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">wd</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">freq</span><span class="op">)</span>, fill <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">stat</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">geom_bar_wind</span><span class="op">(</span></span></span>
<span class="r-in"><span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>wd <span class="op">=</span> <span class="va">wd</span>, ws <span class="op">=</span> <span class="va">ws</span>, z <span class="op">=</span> <span class="va">ws</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    ws_cutfun <span class="op">=</span> <span class="fu"><a href="cut_ws.fun.html">cut_ws.fun</a></span><span class="op">(</span>ws_max <span class="op">=</span> <span class="fl">4</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    width <span class="op">=</span> <span class="fl">1</span>,</span></span>
<span class="r-in"><span>    color <span class="op">=</span> <span class="st">"white"</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="coord_polar2.html">coord_polar2</a></span><span class="op">(</span>start <span class="op">=</span> <span class="op">-</span> <span class="fl">22.5</span> <span class="op">/</span> <span class="fl">180</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 27 rows containing non-finite outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`stat_summary_wind()`).</span>
<span class="r-plt img"><img src="geom_bar_wind-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use stat_summary_wind to generate a radar plot using</span></span></span>
<span class="r-in"><span><span class="co"># the polygon geom, position "identity" and coord_radar()</span></span></span>
<span class="r-in"><span><span class="va">f</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="st">"median"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"mean"</span>,</span></span>
<span class="r-in"><span>  <span class="st">"perc95"</span> <span class="op">=</span> <span class="op">~</span> <span class="fu">stats</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html" class="external-link">quantile</a></span><span class="op">(</span><span class="va">.</span>, probs <span class="op">=</span> <span class="fl">0.95</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">wd</span><span class="op">)</span>, y <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span>, color <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">stat</span><span class="op">)</span>, group <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes_eval.html" class="external-link">after_stat</a></span><span class="op">(</span><span class="va">stat</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu">stat_summary_wind</span><span class="op">(</span></span></span>
<span class="r-in"><span>    mapping <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>wd <span class="op">=</span> <span class="va">wd</span>, ws <span class="op">=</span> <span class="va">ws</span>, z <span class="op">=</span> <span class="va">NOx</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    geom <span class="op">=</span> <span class="st">"polygon"</span>, position <span class="op">=</span> <span class="st">"identity"</span>,</span></span>
<span class="r-in"><span>    fun <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>    ws_cutfun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="st">"ws"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    fill <span class="op">=</span> <span class="cn">NA</span>,</span></span>
<span class="r-in"><span>    size <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span>  <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="coord_radar.html">coord_radar</a></span><span class="op">(</span>start <span class="op">=</span> <span class="op">-</span> <span class="fl">22.5</span> <span class="op">/</span> <span class="fl">180</span> <span class="op">*</span> <span class="va">pi</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span>, expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span>end <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Removed 767 rows containing non-finite outside the scale range</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> (`stat_summary_wind()`).</span>
<span class="r-plt img"><img src="geom_bar_wind-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># ggplot2 doesn't support faceting over a Variable computed in a stat.</span></span></span>
<span class="r-in"><span><span class="co"># But we can summarise the data first and then create the plot.</span></span></span>
<span class="r-in"><span><span class="co"># Less ggplot2 magic, but more transparent for the user</span></span></span>
<span class="r-in"><span><span class="va">data_summarized</span> <span class="op">&lt;-</span> <span class="fu"><a href="summary_wind.html">summary_wind</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, <span class="va">NOx</span>, fun <span class="op">=</span> <span class="va">f</span>,</span></span>
<span class="r-in"><span>  ws_cutfun <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="st">"ws"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data_summarized</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wd</span>, y <span class="op">=</span> <span class="va">NOx</span>, color <span class="op">=</span> <span class="va">stat</span>, group <span class="op">=</span> <span class="va">stat</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_polygon.html" class="external-link">geom_polygon</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span>, fill <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="coord_radar.html">coord_radar</a></span><span class="op">(</span>start <span class="op">=</span> <span class="op">-</span> <span class="fl">22.5</span> <span class="op">/</span> <span class="fl">180</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_color_viridis_d</a></span><span class="op">(</span>end <span class="op">=</span> <span class="fl">0.8</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">scale_y_continuous</a></span><span class="op">(</span>limits <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span>, expand <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">0</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">stat</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="geom_bar_wind-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># like faceting the mapping mechanism makes it hard to impossible</span></span></span>
<span class="r-in"><span><span class="co"># to use the grouping argument of summary wind. Do the summarise</span></span></span>
<span class="r-in"><span><span class="co"># external.</span></span></span>
<span class="r-in"><span><span class="co"># For example: how often comes which concentration from a sector</span></span></span>
<span class="r-in"><span><span class="va">data_summarized</span> <span class="op">&lt;-</span> <span class="fu"><a href="summary_wind.html">summary_wind</a></span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, <span class="va">NOx</span>,</span></span>
<span class="r-in"><span>  groupings <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    fNOx <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/cut_interval.html" class="external-link">cut_number</a></span><span class="op">(</span><span class="va">NO2</span>, <span class="fl">5</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>    year <span class="op">=</span> <span class="fu">lubridate</span><span class="fu">::</span><span class="fu"><a href="https://lubridate.tidyverse.org/reference/year.html" class="external-link">year</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span></span></span>
<span class="r-in"><span>  <span class="op">)</span>,</span></span>
<span class="r-in"><span>  ws_cutfun <span class="op">=</span> <span class="fu"><a href="cut_interval.fun.html">cut_number.fun</a></span><span class="op">(</span><span class="fl">1</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="va">data_summarized</span>, <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">wd</span>, y <span class="op">=</span> <span class="va">freq</span>, fill <span class="op">=</span> <span class="fu">forcats</span><span class="fu">::</span><span class="fu"><a href="https://forcats.tidyverse.org/reference/fct_rev.html" class="external-link">fct_rev</a></span><span class="op">(</span><span class="va">fNOx</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_bar</a></span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="coord_polar2.html">coord_polar2</a></span><span class="op">(</span>start <span class="op">=</span> <span class="op">-</span> <span class="fl">22.5</span> <span class="op">/</span> <span class="fl">180</span> <span class="op">*</span> <span class="va">pi</span> <span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span>, name <span class="op">=</span> <span class="st">"NOx"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="geom_bar_wind-4.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas von Allmen, Jörg Sintermann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

