<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot) — ggwindrose2 • rOstluft.plot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot) — ggwindrose2"><meta name="description" content="ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot)"><meta property="og:description" content="ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot)"><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rOstluft.plot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Kalender_Linie.html">Linien Kalender</a></li>
    <li><a class="dropdown-item" href="../articles/Wind_Density.html">Diurnal Wind als Density und Boxplot</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/Ostluft/rOstluft.plot"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot)</h1>
      <small class="dont-index">Source: <a href="https://github.com/Ostluft/rOstluft.plot/blob/HEAD/R/ggwindrose.R" class="external-link"><code>R/ggwindrose.R</code></a></small>
      <div class="d-none name"><code>ggwindrose2.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot)</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">ggwindrose2</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  <span class="va">ws</span>,</span>
<span>  <span class="va">wd</span>,</span>
<span>  wd_binwidth <span class="op">=</span> <span class="fl">45</span>,</span>
<span>  ws_binwidth <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  ws_max <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  groupings <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  nmin <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  reverse <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  bg <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  calm <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  calm.prefix <span class="op">=</span> <span class="st">"Calm\n"</span>,</span>
<span>  calm.accuracy <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  calm.color <span class="op">=</span> <span class="st">"black"</span>,</span>
<span>  calm.size <span class="op">=</span> <span class="fl">3.88</span>,</span>
<span>  yexpand <span class="op">=</span> <span class="fl">0.2</span>,</span>
<span>  <span class="va">...</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>tibble containing wind speed, wind direction and/or air pollutant concentration data</p></dd>


<dt id="arg-ws">ws<a class="anchor" aria-label="anchor" href="#arg-ws"></a></dt>
<dd><p>symbol giving the wind velocity column name (wind velocity preferably in m/s)</p></dd>


<dt id="arg-wd">wd<a class="anchor" aria-label="anchor" href="#arg-wd"></a></dt>
<dd><p>symbol giving the wind direction column name  in degrees</p></dd>


<dt id="arg-wd-binwidth">wd_binwidth<a class="anchor" aria-label="anchor" href="#arg-wd-binwidth"></a></dt>
<dd><p>numeric, binwidth for wind direction in °, wd_binwidth should fullfill:
<code>(360 / wd_binwidth) %in% c(4, 8, 16, 32)</code></p></dd>


<dt id="arg-ws-binwidth">ws_binwidth<a class="anchor" aria-label="anchor" href="#arg-ws-binwidth"></a></dt>
<dd><p>numeric, binwidth for wind speed</p></dd>


<dt id="arg-ws-max">ws_max<a class="anchor" aria-label="anchor" href="#arg-ws-max"></a></dt>
<dd><p>numeric, can be NA, wind speed is squished at this value</p></dd>


<dt id="arg-groupings">groupings<a class="anchor" aria-label="anchor" href="#arg-groupings"></a></dt>
<dd><p>additional groupings. Use helper <code><a href="grp.html">grp()</a></code> to create. <strong>Necessary</strong> for some facets!</p></dd>


<dt id="arg-nmin">nmin<a class="anchor" aria-label="anchor" href="#arg-nmin"></a></dt>
<dd><p>numeric, minimum number of values for fun, if n &lt; nmin: NA is returned</p></dd>


<dt id="arg-fill-scale">fill_scale<a class="anchor" aria-label="anchor" href="#arg-fill-scale"></a></dt>
<dd><p>ggplot2 discrete fill scale, e.g. <code><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">ggplot2::scale_fill_gradientn()</a></code></p></dd>


<dt id="arg-reverse">reverse<a class="anchor" aria-label="anchor" href="#arg-reverse"></a></dt>
<dd><p>TRUE/FALSE, should wind speed bin factors be sorted descending (TRUE)
or ascending (FALSE). Usually for wind roses a descending order (higher wind speed on
the outside) is used.</p></dd>


<dt id="arg-bg">bg<a class="anchor" aria-label="anchor" href="#arg-bg"></a></dt>
<dd><p>raster map, e.g. ggmap object as plot background</p></dd>


<dt id="arg-calm">calm<a class="anchor" aria-label="anchor" href="#arg-calm"></a></dt>
<dd><p>if specified as numeric value all windspeed below this value will be treated
as calm and the proportion will be displayed as text in the center. The color, size of
the text can be supplied with <code>calm.size</code> and <code>calm.color</code>. A prefix for the text
can be defined with <code>calm.prefix</code> and the accuracy of the number with <code>calm.accuracy</code></p></dd>


<dt id="arg-calm-prefix">calm.prefix<a class="anchor" aria-label="anchor" href="#arg-calm-prefix"></a></dt>
<dd><p>prefix for the calm text as string. Supplied to <code><a href="https://scales.r-lib.org/reference/label_percent.html" class="external-link">scales::label_percent()</a></code> as
argument.</p></dd>


<dt id="arg-calm-accuracy">calm.accuracy<a class="anchor" aria-label="anchor" href="#arg-calm-accuracy"></a></dt>
<dd><p>A number to round to. Use (e.g.) 0.01 to show 2 decimal places of
precision. If NULL uses a heuristic that should ensure breaks have the minimum number
of digits needed to show the difference between adjacent values.</p></dd>


<dt id="arg-calm-color">calm.color<a class="anchor" aria-label="anchor" href="#arg-calm-color"></a></dt>
<dd><p>text color</p></dd>


<dt id="arg-calm-size">calm.size<a class="anchor" aria-label="anchor" href="#arg-calm-size"></a></dt>
<dd><p>text size</p></dd>


<dt id="arg-yexpand">yexpand<a class="anchor" aria-label="anchor" href="#arg-yexpand"></a></dt>
<dd><p>size of the empty calm circle in the center as percentage of the y scale</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Other arguments passed on to <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">ggplot2::geom_bar()</a></code>. Used
to set an aesthetic to a fixed value. Defaults are <code>color = "white", width = 1, size = 0.25</code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p><code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code> object</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu">rOstluft.data</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft.data/man/f.html" class="external-link">f</a></span><span class="op">(</span><span class="st">"Zch_Stampfenbachstrasse_2010-2014.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/read_airmo_csv.html" class="external-link">read_airmo_csv</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/rolf_to_openair.html" class="external-link">rolf_to_openair</a></span><span class="op">(</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, calm <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggwindrose2-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># squish ws</span></span></span>
<span class="r-in"><span><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">5</span>, calm <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggwindrose2-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co">#' # a map as background</span></span></span>
<span class="r-in"><span><span class="va">bb</span> <span class="op">&lt;-</span> <span class="fu"><a href="bbox_lv95.html">bbox_lv95</a></span><span class="op">(</span><span class="fl">2683141</span>, <span class="fl">1249040</span>, <span class="fl">500</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">bg</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_stadia_map.html">get_stadia_map</a></span><span class="op">(</span><span class="va">bb</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> <span style="color: #00BBBB;">ℹ</span> © Stadia Maps © Stamen Design © OpenMapTiles © OpenStreetMap contributors.</span>
<span class="r-in"><span><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">5</span>, calm <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.8</span>, bg <span class="op">=</span> <span class="va">bg</span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>    panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span></span>
<span class="r-in"><span>   <span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggwindrose2-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># another fill scale</span></span></span>
<span class="r-in"><span><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">5</span>,</span></span>
<span class="r-in"><span>           fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu">matlab</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/matlab/man/jet.colors.html" class="external-link">jet.colors</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggwindrose2-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reverse the coloring of the fill</span></span></span>
<span class="r-in"><span><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">4</span>,</span></span>
<span class="r-in"><span>           fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggwindrose2-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># reverse the order of ws, but keep the coloring and legend order</span></span></span>
<span class="r-in"><span><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">4</span>, reverse <span class="op">=</span> <span class="cn">FALSE</span>,</span></span>
<span class="r-in"><span>           fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="ggwindrose2-6.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas von Allmen, Jörg Sintermann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

