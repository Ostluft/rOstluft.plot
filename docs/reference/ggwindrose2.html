<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot) — ggwindrose2 • rOstluft.plot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot) — ggwindrose2"><meta property="og:description" content="ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot)"><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rOstluft.plot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/articles/Kalender_Linie.html">Linien Kalender</a>
    </li>
    <li>
      <a href="../articles/articles/Wind_Density.html">Diurnal Wind als Density und Boxplot</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/Ostluft/rOstluft.plot" class="external-link">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot)</h1>
    <small class="dont-index">Source: <a href="https://github.com/Ostluft/rOstluft.plot/blob/HEAD/R/ggwindrose.R" class="external-link"><code>R/ggwindrose.R</code></a></small>
    <div class="hidden name"><code>ggwindrose2.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>ggplot wrapper to create a windrose with calm support (polar wind-bin frequency plot)</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">ggwindrose2</span><span class="op">(</span>
  <span class="va">data</span>,
  <span class="va">ws</span>,
  <span class="va">wd</span>,
  wd_binwidth <span class="op">=</span> <span class="fl">45</span>,
  ws_binwidth <span class="op">=</span> <span class="fl">1</span>,
  ws_max <span class="op">=</span> <span class="cn">NA</span>,
  groupings <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="op">)</span>,
  nmin <span class="op">=</span> <span class="fl">1</span>,
  fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span><span class="op">)</span>,
  reverse <span class="op">=</span> <span class="cn">TRUE</span>,
  bg <span class="op">=</span> <span class="cn">NULL</span>,
  calm <span class="op">=</span> <span class="cn">NA</span>,
  calm.prefix <span class="op">=</span> <span class="st">"Calm\n"</span>,
  calm.accuracy <span class="op">=</span> <span class="fl">1</span>,
  calm.color <span class="op">=</span> <span class="st">"black"</span>,
  calm.size <span class="op">=</span> <span class="fl">3.88</span>,
  yexpand <span class="op">=</span> <span class="fl">0.2</span>,
  <span class="va">...</span>
<span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>data</dt>
<dd><p>tibble containing wind speed, wind direction and/or air pollutant concentration data</p></dd>
<dt>ws</dt>
<dd><p>symbol giving the wind velocity column name (wind velocity preferably in m/s)</p></dd>
<dt>wd</dt>
<dd><p>symbol giving the wind direction column name  in degrees</p></dd>
<dt>wd_binwidth</dt>
<dd><p>numeric, binwidth for wind direction in °, wd_binwidth should fullfill:
<code>(360 / wd_binwidth) %in% c(4, 8, 16, 32)</code></p></dd>
<dt>ws_binwidth</dt>
<dd><p>numeric, binwidth for wind speed</p></dd>
<dt>ws_max</dt>
<dd><p>numeric, can be NA, wind speed is squished at this value</p></dd>
<dt>groupings</dt>
<dd><p>additional groupings. Use helper <code><a href="grp.html">grp()</a></code> to create. <strong>Necessary</strong> for some facets!</p></dd>
<dt>nmin</dt>
<dd><p>numeric, minimum number of values for fun, if n &lt; nmin: NA is returned</p></dd>
<dt>fill_scale</dt>
<dd><p>ggplot2 discrete fill scale, e.g. <code><a href="https://ggplot2.tidyverse.org/reference/scale_gradient.html" class="external-link">ggplot2::scale_fill_gradientn()</a></code></p></dd>
<dt>reverse</dt>
<dd><p>TRUE/FALSE, should wind speed bin factors be sorted descending (TRUE)
or ascending (FALSE). Usually for wind roses a descending order (higher wind speed on
the outside) is used.</p></dd>
<dt>bg</dt>
<dd><p>raster map, e.g. ggmap object as plot background</p></dd>
<dt>calm</dt>
<dd><p>if specified as numeric value all windspeed below this value will be treated
as calm and the proportion will be displayed as text in the center. The color, size of
the text can be supplied with <code>calm.size</code> and <code>calm.color</code>. A prefix for the text
can be defined with <code>calm.prefix</code> and the accuracy of the number with <code>calm.accuracy</code></p></dd>
<dt>calm.prefix</dt>
<dd><p>prefix for the calm text as string. Supplied to <code><a href="https://scales.r-lib.org/reference/label_percent.html" class="external-link">scales::label_percent()</a></code> as
argument.</p></dd>
<dt>calm.accuracy</dt>
<dd><p>A number to round to. Use (e.g.) 0.01 to show 2 decimal places of
precision. If NULL uses a heuristic that should ensure breaks have the minimum number
of digits needed to show the difference between adjacent values.</p></dd>
<dt>calm.color</dt>
<dd><p>text color</p></dd>
<dt>calm.size</dt>
<dd><p>text size</p></dd>
<dt>yexpand</dt>
<dd><p>size of the empty calm circle in the center as percentage of the y scale</p></dd>
<dt>...</dt>
<dd><p>Other arguments passed on to <code><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">ggplot2::geom_bar()</a></code>. Used
to set an aesthetic to a fixed value. Defaults are <code>color = "white", width = 1, size = 0.25</code></p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p><code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code> object</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu">rOstluft.data</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft.data/man/f.html" class="external-link">f</a></span><span class="op">(</span><span class="st">"Zch_Stampfenbachstrasse_2010-2014.csv"</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="va">data</span> <span class="op">&lt;-</span></span>
<span class="r-in">  <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/read_airmo_csv.html" class="external-link">read_airmo_csv</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span>
<span class="r-in">  <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/rolf_to_openair.html" class="external-link">rolf_to_openair</a></span><span class="op">(</span><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, calm <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span class="r-plt img"><img src="ggwindrose2-1.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># squish ws</span></span>
<span class="r-in"><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">5</span>, calm <span class="op">=</span> <span class="fl">0.3</span><span class="op">)</span></span>
<span class="r-plt img"><img src="ggwindrose2-2.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co">#' # a map as background</span></span>
<span class="r-in"><span class="va">bb</span> <span class="op">&lt;-</span> <span class="fu"><a href="bbox_lv95.html">bbox_lv95</a></span><span class="op">(</span><span class="fl">2683141</span>, <span class="fl">1249040</span>, <span class="fl">500</span><span class="op">)</span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Discarded datum CH1903+ in Proj4 definition</span>
<span class="r-in"><span class="va">bg</span> <span class="op">&lt;-</span> <span class="fu"><a href="get_stamen_map.html">get_stamen_map</a></span><span class="op">(</span><span class="va">bb</span><span class="op">)</span></span>
<span class="r-in"><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">5</span>, calm <span class="op">=</span> <span class="fl">0.5</span>, alpha <span class="op">=</span> <span class="fl">0.8</span>, bg <span class="op">=</span> <span class="va">bg</span><span class="op">)</span> <span class="op">+</span></span>
<span class="r-in">  <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span></span>
<span class="r-in">    panel.grid.major <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/element.html" class="external-link">element_line</a></span><span class="op">(</span>linetype <span class="op">=</span> <span class="fl">2</span>, color <span class="op">=</span> <span class="st">"black"</span>, size <span class="op">=</span> <span class="fl">0.5</span><span class="op">)</span></span>
<span class="r-in">   <span class="op">)</span></span>
<span class="r-plt img"><img src="ggwindrose2-3.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># another fill scale</span></span>
<span class="r-in"><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">5</span>,</span>
<span class="r-in">           fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_manual.html" class="external-link">scale_fill_manual</a></span><span class="op">(</span>values <span class="op">=</span> <span class="fu">matlab</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/matlab/man/jet.colors.html" class="external-link">jet.colors</a></span><span class="op">(</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-plt img"><img src="ggwindrose2-4.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># reverse the coloring of the fill</span></span>
<span class="r-in"><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">4</span>,</span>
<span class="r-in">           fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-plt img"><img src="ggwindrose2-5.png" alt="" width="700" height="433"></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># reverse the order of ws, but keep the coloring and legend order</span></span>
<span class="r-in"><span class="fu">ggwindrose2</span><span class="op">(</span><span class="va">data</span>, <span class="va">ws</span>, <span class="va">wd</span>, ws_max <span class="op">=</span> <span class="fl">4</span>, reverse <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span class="r-in">           fill_scale <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_viridis.html" class="external-link">scale_fill_viridis_d</a></span><span class="op">(</span>direction <span class="op">=</span> <span class="op">-</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-plt img"><img src="ggwindrose2-6.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Thomas von Allmen, Jörg Sintermann.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.3.</p>
</div>

      </footer></div>

  


  

  </body></html>

