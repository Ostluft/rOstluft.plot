<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Plot time variations — gg_timevariation • rOstluft.plot</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Plot time variations — gg_timevariation"><meta name="description" content="Inspired by openair::timeVariation() multiple functions to plot diurnal,
day hour of the week, day of the week and monthly variation. The functions are
optimized for data in long format and the defaults are for the rolf format from
the rOstluft Package."><meta property="og:description" content="Inspired by openair::timeVariation() multiple functions to plot diurnal,
day hour of the week, day of the week and monthly variation. The functions are
optimized for data in long format and the defaults are for the rolf format from
the rOstluft Package."><meta property="og:image" content="/logo.png"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">rOstluft.plot</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../index.html"><span class="fa fa-home fa-lg"></span></a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/Kalender_Linie.html">Linien Kalender</a></li>
    <li><a class="dropdown-item" href="../articles/Wind_Density.html">Diurnal Wind als Density und Boxplot</a></li>
  </ul></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><a class="external-link nav-link" href="https://github.com/Ostluft/rOstluft.plot"><span class="fa fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Plot time variations</h1>
      <small class="dont-index">Source: <a href="https://github.com/Ostluft/rOstluft.plot/blob/HEAD/R/gg_timevariation.R" class="external-link"><code>R/gg_timevariation.R</code></a></small>
      <div class="d-none name"><code>gg_timevariation.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Inspired by <code><a href="https://rdrr.io/pkg/openair/man/timeVariation.html" class="external-link">openair::timeVariation()</a></code> multiple functions to plot diurnal,
day hour of the week, day of the week and monthly variation. The functions are
optimized for data in long format and the defaults are for the rolf format from
the <a href="https://ostluft.github.io/rOstluft/index.html" class="external-link">rOstluft Package</a>.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">gg_timevariation</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  dt <span class="op">=</span> <span class="st">"starttime"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"parameter"</span>, <span class="st">"interval"</span>, <span class="st">"unit"</span><span class="op">)</span>,</span>
<span>  statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span><span class="op">)</span>,</span>
<span>  draw_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  B <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ylab <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/waiver.html" class="external-link">waiver</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  legend_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  language_code <span class="op">=</span> <span class="st">"de"</span>,</span>
<span>  geom <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geom_ci <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gg_timevariation_wday_hour</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  dt <span class="op">=</span> <span class="st">"starttime"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"parameter"</span>, <span class="st">"interval"</span>, <span class="st">"unit"</span><span class="op">)</span>,</span>
<span>  statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span><span class="op">)</span>,</span>
<span>  draw_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  ylab <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/waiver.html" class="external-link">waiver</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  B <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  legend_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  language_code <span class="op">=</span> <span class="st">"de"</span>,</span>
<span>  geom <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geom_ci <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gg_timevariation_wday</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  dt <span class="op">=</span> <span class="st">"starttime"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"parameter"</span>, <span class="st">"interval"</span>, <span class="st">"unit"</span><span class="op">)</span>,</span>
<span>  statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span><span class="op">)</span>,</span>
<span>  draw_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  B <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ylab <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/waiver.html" class="external-link">waiver</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  legend_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  language_code <span class="op">=</span> <span class="st">"de"</span>,</span>
<span>  geom <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geom_ci <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gg_timevariation_month</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  dt <span class="op">=</span> <span class="st">"starttime"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"parameter"</span>, <span class="st">"interval"</span>, <span class="st">"unit"</span><span class="op">)</span>,</span>
<span>  statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span><span class="op">)</span>,</span>
<span>  draw_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  B <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ylab <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/waiver.html" class="external-link">waiver</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  legend_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  language_code <span class="op">=</span> <span class="st">"de"</span>,</span>
<span>  geom <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geom_ci <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">gg_timevariation_diurnal</span><span class="op">(</span></span>
<span>  <span class="va">data</span>,</span>
<span>  dt <span class="op">=</span> <span class="st">"starttime"</span>,</span>
<span>  y <span class="op">=</span> <span class="st">"value"</span>,</span>
<span>  group <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="st">"site"</span>, <span class="st">"parameter"</span>, <span class="st">"interval"</span>, <span class="st">"unit"</span><span class="op">)</span>,</span>
<span>  statistic <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"mean"</span>, <span class="st">"median"</span><span class="op">)</span>,</span>
<span>  draw_ci <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  conf_interval <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  B <span class="op">=</span> <span class="fl">1000</span>,</span>
<span>  ylab <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/waiver.html" class="external-link">waiver</a></span><span class="op">(</span><span class="op">)</span>,</span>
<span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="cn">NA</span>, <span class="cn">NA</span><span class="op">)</span>,</span>
<span>  legend_title <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  language_code <span class="op">=</span> <span class="st">"de"</span>,</span>
<span>  geom <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">1</span><span class="op">)</span>,</span>
<span>  geom_ci <span class="op">=</span> <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">geom_ribbon</a></span><span class="op">(</span>alpha <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-data">data<a class="anchor" aria-label="anchor" href="#arg-data"></a></dt>
<dd><p>data frame with input data as hourly time series</p></dd>


<dt id="arg-dt">dt<a class="anchor" aria-label="anchor" href="#arg-dt"></a></dt>
<dd><p>a string or symbol for the date time column (default: starttime)</p></dd>


<dt id="arg-y">y<a class="anchor" aria-label="anchor" href="#arg-y"></a></dt>
<dd><p>a string or symbol specifying the target column to be summarised (default: value)</p></dd>


<dt id="arg-group">group<a class="anchor" aria-label="anchor" href="#arg-group"></a></dt>
<dd><p>column as string to be used to split the input data in
multiple groups. Should be a member of <code>id_cols</code> eg. parameter or site (default NULL)</p></dd>


<dt id="arg-id-cols">id_cols<a class="anchor" aria-label="anchor" href="#arg-id-cols"></a></dt>
<dd><p>A set of columns that uniquely identifies each observation.
Use <code><a href="grp.html">rOstluft.plot::grp()</a></code> for quoting.
default <code>rOstluft.plot::grp(site, parameter, interval, unit)</code></p></dd>


<dt id="arg-statistic">statistic<a class="anchor" aria-label="anchor" href="#arg-statistic"></a></dt>
<dd><p>Can be <code>“mean”</code> (default) or <code>“median”</code>. If the statistic is ‘mean’ then
the mean line and the 95% confidence interval in the mean are plotted by default. <code><a href="https://ggplot2.tidyverse.org/reference/hmisc.html" class="external-link">ggplot2::mean_cl_boot()</a></code>
is used to calculated the intervals trough bootstrap simulations without assuming normality.
If the statistic is ‘median’ then the median line is plotted together with the
25/75th quantiles are plotted. Users can control the confidence intervals with
<code>draw_ci</code> and <code>conf_interval</code></p></dd>


<dt id="arg-draw-ci">draw_ci<a class="anchor" aria-label="anchor" href="#arg-draw-ci"></a></dt>
<dd><p>if <code>TRUE</code> draw confidence interval using <code><a href="https://ggplot2.tidyverse.org/reference/hmisc.html" class="external-link">ggplot2::mean_cl_boot()</a></code> for <code>"mean"</code>
and <code><a href="https://ggplot2.tidyverse.org/reference/hmisc.html" class="external-link">ggplot2::median_hilow()</a></code> for <code>"median"</code>.</p></dd>


<dt id="arg-conf-interval">conf_interval<a class="anchor" aria-label="anchor" href="#arg-conf-interval"></a></dt>
<dd><p>for <code>"mean"</code> (<code><a href="https://ggplot2.tidyverse.org/reference/hmisc.html" class="external-link">ggplot2::mean_cl_boot()</a></code>) specifies the confidence level (0-1)
for interval estimation of the population mean. For  <code>"median"</code> (<code><a href="https://ggplot2.tidyverse.org/reference/hmisc.html" class="external-link">ggplot2::median_hilow()</a></code>)
conf_interval is the coverage probability the outer quantiles should target. When the default, 0.5,
is used, the lower and upper quantiles computed are 0.25 and 0.75</p></dd>


<dt id="arg-b">B<a class="anchor" aria-label="anchor" href="#arg-b"></a></dt>
<dd><p>number of bootstrap resamples for <code><a href="https://ggplot2.tidyverse.org/reference/hmisc.html" class="external-link">ggplot2::mean_cl_boot()</a></code></p></dd>


<dt id="arg-ylab">ylab<a class="anchor" aria-label="anchor" href="#arg-ylab"></a></dt>
<dd><p>provide a custom y plot label</p></dd>


<dt id="arg-ylim">ylim<a class="anchor" aria-label="anchor" href="#arg-ylim"></a></dt>
<dd><p>limits for y scale see <code><a href="https://ggplot2.tidyverse.org/reference/scale_continuous.html" class="external-link">ggplot2::scale_y_continuous()</a></code> for more infos.</p></dd>


<dt id="arg-legend-title">legend_title<a class="anchor" aria-label="anchor" href="#arg-legend-title"></a></dt>
<dd><p>provide a legend title</p></dd>


<dt id="arg-language-code">language_code<a class="anchor" aria-label="anchor" href="#arg-language-code"></a></dt>
<dd><p>ISO country code for the language used as weekdays and months
labels (default: "de")</p></dd>


<dt id="arg-geom">geom<a class="anchor" aria-label="anchor" href="#arg-geom"></a></dt>
<dd><p>geom used for rendering default <code><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">ggplot2::geom_line()</a></code></p></dd>


<dt id="arg-geom-ci">geom_ci<a class="anchor" aria-label="anchor" href="#arg-geom-ci"></a></dt>
<dd><p>geom used for rendering confidence interval. Must support ymin/ymax mapping.
default <code><a href="https://ggplot2.tidyverse.org/reference/geom_ribbon.html" class="external-link">ggplot2::geom_ribbon()</a></code></p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>a <code><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot2::ggplot()</a></code> object or in case of <code>gg_timevariaton()</code> a <a href="https://patchwork.data-imaginist.com/reference/patchwork-package.html" class="external-link">patchwork::patchwork</a>  object</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">fn</span> <span class="op">&lt;-</span> <span class="fu">rOstluft.data</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft.data/man/f.html" class="external-link">f</a></span><span class="op">(</span><span class="st">"Zch_Stampfenbachstrasse_2010-2014.csv"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">data</span> <span class="op">&lt;-</span></span></span>
<span class="r-in"><span>  <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/read_airmo_csv.html" class="external-link">read_airmo_csv</a></span><span class="op">(</span><span class="va">fn</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/pluck.html" class="external-link">pluck_parameter</a></span><span class="op">(</span><span class="st">"NOx"</span>, <span class="st">"NO"</span>, <span class="st">"NO2"</span><span class="op">)</span> <span class="op"><a href="pipe.html">%&gt;%</a></span></span></span>
<span class="r-in"><span>  <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/resample.html" class="external-link">resample</a></span><span class="op">(</span>new_interval <span class="op">=</span> <span class="st">"h1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># monthly variation of data</span></span></span>
<span class="r-in"><span><span class="fu">gg_timevariation_month</span><span class="op">(</span><span class="va">data</span>, group <span class="op">=</span> <span class="st">"parameter"</span>, ylab <span class="op">=</span> <span class="st">"Konzentration [µg/m3]"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-plt img"><img src="gg_timevariation-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># don't draw a confidence interval</span></span></span>
<span class="r-in"><span><span class="fu">gg_timevariation_month</span><span class="op">(</span><span class="va">data</span>, group <span class="op">=</span> <span class="st">"parameter"</span>, draw_ci <span class="op">=</span> <span class="cn">FALSE</span>, ylab <span class="op">=</span> <span class="st">"Konzentration [µg/m3]"</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="gg_timevariation-2.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># for faceting the variable must be included in the id_cols</span></span></span>
<span class="r-in"><span><span class="fu">gg_timevariation_wday</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">data</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"parameter"</span>,</span></span>
<span class="r-in"><span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="va">site</span>, <span class="va">parameter</span>, <span class="va">interval</span>, <span class="va">unit</span>, season <span class="op">=</span> <span class="fu"><a href="cut_season.html">cut_season</a></span><span class="op">(</span><span class="va">starttime</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/facet_wrap.html" class="external-link">facet_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/vars.html" class="external-link">vars</a></span><span class="op">(</span><span class="va">season</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-plt img"><img src="gg_timevariation-3.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># utility function to compose all plots together using patchwork</span></span></span>
<span class="r-in"><span><span class="co"># for advanced use cases you should probably compose the plot yourself</span></span></span>
<span class="r-in"><span><span class="co"># you can use ylim to start all y axis by 0. Lowering B speed up the process.</span></span></span>
<span class="r-in"><span><span class="fu">gg_timevariation</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">data</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"parameter"</span>,</span></span>
<span class="r-in"><span>  B <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"Konzentration [µg/m3]"</span>,</span></span>
<span class="r-in"><span>  ylim <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>, <span class="cn">NA</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-plt img"><img src="gg_timevariation-4.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you can use wide data, but only with a single pollutant</span></span></span>
<span class="r-in"><span><span class="va">data_wide</span> <span class="op">&lt;-</span> <span class="fu">rOstluft</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/rOstluft/man/rolf_to_openair.html" class="external-link">rolf_to_openair</a></span><span class="op">(</span><span class="va">data</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">gg_timevariation_wday_hour</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">data_wide</span>,</span></span>
<span class="r-in"><span>  dt <span class="op">=</span> <span class="va">date</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">NO2</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"site"</span>,</span></span>
<span class="r-in"><span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="va">site</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-plt img"><img src="gg_timevariation-5.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># you can also use a function in id_cols to create groups</span></span></span>
<span class="r-in"><span><span class="fu">gg_timevariation_diurnal</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">data_wide</span>,</span></span>
<span class="r-in"><span>  dt <span class="op">=</span> <span class="va">date</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">NO2</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"season"</span>,</span></span>
<span class="r-in"><span>  id_cols <span class="op">=</span> <span class="fu"><a href="grp.html">grp</a></span><span class="op">(</span><span class="va">site</span>, season <span class="op">=</span> <span class="fu"><a href="cut_season.html">cut_season</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-plt img"><img src="gg_timevariation-6.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># use an alternative geom</span></span></span>
<span class="r-in"><span><span class="fu">gg_timevariation_month</span><span class="op">(</span></span></span>
<span class="r-in"><span>  <span class="va">data</span>,</span></span>
<span class="r-in"><span>  group <span class="op">=</span> <span class="st">"parameter"</span>,</span></span>
<span class="r-in"><span>  ylab <span class="op">=</span> <span class="st">"Konzentration [µg/m3]"</span>,</span></span>
<span class="r-in"><span>  B <span class="op">=</span> <span class="fl">10</span>,</span></span>
<span class="r-in"><span>  geom_ci <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_linerange.html" class="external-link">geom_linerange</a></span><span class="op">(</span>size <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span> <span class="op">+</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/scale_discrete.html" class="external-link">scale_x_discrete</a></span><span class="op">(</span></span></span>
<span class="r-in"><span>  expand <span class="op">=</span> <span class="fu"><a href="https://ggplot2.tidyverse.org/reference/expansion.html" class="external-link">expansion</a></span><span class="op">(</span>mult <span class="op">=</span> <span class="fl">0.02</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> plotting with statistic mean and confidence interval of 0.95</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Scale for <span style="color: #00BB00;">x</span> is already present.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Adding another scale for <span style="color: #00BB00;">x</span>, which will replace the existing scale.</span>
<span class="r-plt img"><img src="gg_timevariation-7.png" alt="" width="700" height="433"></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Thomas von Allmen, Jörg Sintermann.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer></div>





  </body></html>

