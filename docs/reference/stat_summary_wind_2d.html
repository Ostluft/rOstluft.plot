<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Summarise z values over binned wind data. — stat_summary_wind_2d • rOstluft.plot</title>

<!-- favicons -->
<link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png" />
<link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png" />
<link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png" />
<link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png" />

<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cosmo/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Summarise z values over binned wind data. — stat_summary_wind_2d" />
<meta property="og:description" content="Binning is done by StatWind, so input data tostat_summary_wind() should be original unbinned data.
Depending on the groups argument, binning is either done 2-dimensional over cartesian u and v wind vectors
(calculated from input data; then, stat_summary_wind() yields results similar to openair::polarPlot())
or 1-dimensional over wind direction or wind velocity bins, respectively." />
<meta property="og:image" content="/logo.png" />




<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">rOstluft.plot</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9012</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/articles/Kalender_Linie.html">Linien Kalender</a>
    </li>
    <li>
      <a href="../articles/articles/Wind_Density.html">Diurnal Wind als Density und Boxplot</a>
    </li>
  </ul>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/Ostluft/rOstluft.plot">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Summarise z values over binned wind data.</h1>
    <small class="dont-index">Source: <a href='https://github.com/Ostluft/rOstluft.plot/blob/master/R/stat_summary_wind_2d.R'><code>R/stat_summary_wind_2d.R</code></a></small>
    <div class="hidden name"><code>stat_summary_wind_2d.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Binning is done by StatWind, so input data to<code><a href='geom_bar_wind.html'>stat_summary_wind()</a></code> should be original unbinned data.
Depending on the groups argument, binning is either done 2-dimensional over cartesian u and v wind vectors
(calculated from input data; then, <code><a href='geom_bar_wind.html'>stat_summary_wind()</a></code> yields results similar to <code><a href='http://davidcarslaw.github.io/openair/reference/polarPlot.html'>openair::polarPlot()</a></code>)
or 1-dimensional over wind direction or wind velocity bins, respectively.</p>
    </div>

    <pre class="usage"><span class='fu'>stat_summary_wind_2d</span><span class='op'>(</span>
  data <span class='op'>=</span> <span class='cn'>NULL</span>,
  mapping <span class='op'>=</span> <span class='cn'>NULL</span>,
  geom <span class='op'>=</span> <span class='st'>"raster"</span>,
  position <span class='op'>=</span> <span class='st'>"identity"</span>,
  <span class='va'>...</span>,
  fun <span class='op'>=</span> <span class='st'>"mean"</span>,
  fun.args <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/list.html'>list</a></span><span class='op'>(</span><span class='op'>)</span>,
  nmin <span class='op'>=</span> <span class='fl'>1</span>,
  ws_max <span class='op'>=</span> <span class='cn'>NA</span>,
  bins <span class='op'>=</span> <span class='fl'>10</span><span class='op'>^</span><span class='fl'>2</span>,
  smooth <span class='op'>=</span> <span class='cn'>TRUE</span>,
  k <span class='op'>=</span> <span class='fl'>100</span>,
  extrapolate <span class='op'>=</span> <span class='cn'>TRUE</span>,
  dist <span class='op'>=</span> <span class='fl'>0.1</span>,
  na.rm <span class='op'>=</span> <span class='cn'>FALSE</span>,
  show.legend <span class='op'>=</span> <span class='cn'>NA</span>,
  inherit.aes <span class='op'>=</span> <span class='cn'>TRUE</span>
<span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>The data to be displayed in this layer. Requires input data including at least three
columns carrying information regarding:
* wind direction (in °)
* wind velocity
* z-values (e.g. air pollutant concentration)</p></td>
    </tr>
    <tr>
      <th>mapping</th>
      <td><p>ggplot2 mapping, e.g. aes(wd = wd, ws = ws, z = NOx); requires wd, ws, z</p></td>
    </tr>
    <tr>
      <th>geom</th>
      <td><p>The geometric object to use display the data (in this case: raster).</p></td>
    </tr>
    <tr>
      <th>position</th>
      <td><p>Position adjustment, either as a string, or the result of
a call to a position adjustment function.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>other arguments passed on to <code><a href='https://ggplot2.tidyverse.org/reference/layer.html'>ggplot2::layer()</a></code> as <code>params = list(...)</code>.</p></td>
    </tr>
    <tr>
      <th>fun</th>
      <td><p>function or list of functions for summary.</p></td>
    </tr>
    <tr>
      <th>fun.args</th>
      <td><p>a list of extra arguments to pass to fun.</p></td>
    </tr>
    <tr>
      <th>nmin</th>
      <td><p>numeric, minimum number of values for fun, if n &lt; nmin: NA is returned</p></td>
    </tr>
    <tr>
      <th>ws_max</th>
      <td><p>numeric or NA, maximum wind velocity for binning: above ws_max, z is set NA</p></td>
    </tr>
    <tr>
      <th>bins</th>
      <td><p>numeric, number of bins over the range of values if <code>!groups %in% c("u", "v")</code></p></td>
    </tr>
    <tr>
      <th>smooth</th>
      <td><p>TRUE/FALSE, applies if <code>groups = c("u", "v")</code>; should smoothing of summary results should be performed
using <code><a href='fit_gam_surface.html'>fit_gam_surface()</a></code>?</p></td>
    </tr>
    <tr>
      <th>k</th>
      <td><p>numeric, applies if smooth = TRUE; degree of smoothing in smooth term in fit_gam_surface()</p></td>
    </tr>
    <tr>
      <th>extrapolate</th>
      <td><p>TRUE/FALSE, applies if smooth = TRUE; fit_gam_surface() returns extrapolated (predicted)
values for u, v coordinates that otherwise would have have NA for summarised z if extrapolate = TRUE,
those values are returned (to a certain degree depending on the value of dist)</p></td>
    </tr>
    <tr>
      <th>dist</th>
      <td><p>numeric, fraction of 1, applies if smooth = TRUE and extrapolate = TRUE; maximum distance to next
coordinate-pair at which the result of fit_gam_surface(z) should be returned</p></td>
    </tr>
    <tr>
      <th>na.rm</th>
      <td><p>If <code>FALSE</code>, the default, missing values are removed with
a warning. If <code>TRUE</code>, missing values are silently removed.</p></td>
    </tr>
    <tr>
      <th>show.legend</th>
      <td><p>logical. Should this layer be included in the legends?
<code>NA</code>, the default, includes if any aesthetics are mapped.
<code>FALSE</code> never includes, and <code>TRUE</code> always includes.
It can also be a named logical vector to finely select the aesthetics to
display.</p></td>
    </tr>
    <tr>
      <th>inherit.aes</th>
      <td><p>If <code>FALSE</code>, overrides the default aesthetics,
rather than combining with them. This is most useful for helper functions
that define both data and aesthetics and shouldn't inherit behaviour from
the default plot specification, e.g. <code><a href='https://ggplot2.tidyverse.org/reference/borders.html'>borders()</a></code>.</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>ggplot2 layer</p>
    <h2 class="hasAnchor" id="aesthetics"><a class="anchor" href="#aesthetics"></a>Aesthetics</h2>

    

<ul>
<li><p>wd: wind direction in degrees</p></li>
<li><p>ws: wind velocity</p></li>
<li><p>z: z values to be summarised</p></li>
</ul>

    <h2 class="hasAnchor" id="computed-variables"><a class="anchor" href="#computed-variables"></a>Computed variables</h2>

    

<ul>
<li><p>If groups = c("u", "v"): a tibble is returned, binned over u and v, with variables:</p></li>
</ul>
<ul>
<li><p>wd: wind direction corresponding to midpoint value of u and v</p></li>
<li><p>ws: wind velocity corresponding to midpoint value of u and v</p></li>
<li><p>wd_class: new bins over wd considering binwidth</p></li>
<li><p>ws_class: new bins over ws considering binwidth and ws_max</p></li>
<li><p>u: bins over u (from input wd and ws)</p></li>
<li><p>v: bins over v (from input wd and ws)</p></li>
<li><p>z: result from fun(z, ...)</p></li>
</ul>
<ul>
<li><p>If groups = NULL: groups = "wd". In this case, bins are calculated over wind direction;
a tibble including wd_class and summarised z is returned</p></li>
<li><p>groups can be strings for other varibables in data; then fun is applied over those;
a tibble including groups and summarised z is returned</p></li>
</ul>


    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='http://ggplot2.tidyverse.org'>ggplot2</a></span><span class='op'>)</span>

<span class='va'>fn</span> <span class='op'>&lt;-</span> <span class='fu'>rOstluft.data</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/rOstluft.data/man/f.html'>f</a></span><span class='op'>(</span><span class='st'>"Zch_Stampfenbachstrasse_2010-2014.csv"</span><span class='op'>)</span>

<span class='va'>df</span> <span class='op'>&lt;-</span> <span class='fu'>rOstluft</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/rOstluft/man/read_airmo_csv.html'>read_airmo_csv</a></span><span class='op'>(</span><span class='va'>fn</span><span class='op'>)</span> <span class='op'>%&gt;%</span>
  <span class='fu'>rOstluft</span><span class='fu'>::</span><span class='fu'><a href='https://rdrr.io/pkg/rOstluft/man/rolf_to_openair.html'>rolf_to_openair</a></span><span class='op'>(</span><span class='op'>)</span>

<span class='fu'><a href='https://ggplot2.tidyverse.org/reference/ggplot.html'>ggplot</a></span><span class='op'>(</span><span class='va'>df</span>, <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>x <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes_eval.html'>stat</a></span><span class='op'>(</span><span class='va'>u</span><span class='op'>)</span>, y <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes_eval.html'>stat</a></span><span class='op'>(</span><span class='va'>v</span><span class='op'>)</span>, fill <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes_eval.html'>stat</a></span><span class='op'>(</span><span class='va'>z</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'>stat_summary_wind_2d</span><span class='op'>(</span>mapping <span class='op'>=</span> <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/aes.html'>aes</a></span><span class='op'>(</span>wd <span class='op'>=</span> <span class='va'>wd</span>, ws <span class='op'>=</span> <span class='va'>ws</span>, z <span class='op'>=</span> <span class='va'>NO2</span><span class='op'>)</span>, bins <span class='op'>=</span> <span class='fl'>50</span><span class='op'>^</span><span class='fl'>2</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='coord_cartpolar.html'>coord_cartpolar</a></span><span class='op'>(</span><span class='op'>)</span> <span class='op'>+</span>
  <span class='fu'><a href='https://ggplot2.tidyverse.org/reference/scale_viridis.html'>scale_fill_viridis_c</a></span><span class='op'>(</span>na.value <span class='op'>=</span> <span class='cn'>NA</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 767 rows containing non-finite values (stat_summary_wind2d).</span></div><div class='output co'>#&gt; <span class='warning'>Warning: Removed 991 rows containing missing values (geom_raster).</span></div><div class='img'><img src='stat_summary_wind_2d-1.png' alt='' width='700' height='433' /></div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Thomas von Allmen, Jörg Sintermann.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


